<script id="filter-button-template" type="text/html">
    <div class="btn-group">
        <button type="button" class="btn [[ buttonClass(field, filter) ]] dropdown-toggle"
                id="button_[[ field ]]"
                data-field="[[ field ]]"
                data-field-type="[[ getFieldType(field).type ]]"
                data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
            [[ #if filterValue(field, filter) ]]
                [[ displayName(field) ]]: [[ displayValue(field, filterValue(field, filter)) ]]
            [[ else ]]
            [[ displayName(field) ]]
            [[ /if ]]
            <span class="caret"></span>
        </button>
        [[ #getFieldType(field) ]]
        [[ #if type == 'select' ]]
            <ul class="dropdown-menu">
                [[ #if filterValue(field, filter) ]]
                    <li><a on-click="removefilter:[[ field ]]">Clear</a></li>
                    <li role="separator" class="divider"></li>
                [[ /if ]]
                [[ #each options ]]
                    <li><a on-click="addfilter:[[field]],[[ 0 ]]">[[ 1 ]]</li>
                [[ /each ]]
            </ul>
        [[ elseif type == 'boolean' ]]
            <ul class="dropdown-menu">
                [[ #if filterValue(field, filter) ]]
                    <li><a on-click="removefilter:[[ field ]]">Clear</a></li>
                    <li role="separator" class="divider"></li>
                [[ /if ]]
                <li><a on-click="addfilter:[[field]],[[ 'True' ]]">True</a></li>
                <li><a on-click="addfilter:[[field]],[[ 'False' ]]">False</a></li>
            </ul>
        [[ elseif type == 'daterange' ]]
        [[ /if ]]
        [[ /each ]]
    </div>
</script>

<script id="filter-template" type="text/html">
    <div class="filters m-b text-md-center">
        <filter-button field="time_received" />
        <filter-button field="shift" />
        <filter-button field="dow_received" />
        <filter-button field="beat" />
        <filter-button field="initiated_by" />
        <filter-button field="cancelled" />
    </div>
</script>

<script id="old-filter-template" type="text/html">
    <div class="filter-sidebar">
        <div class="filters">
            <div id="filter-description">
                [[ #each describeFilter(filter) ]]
                <div class="filter btn">
                        <span>
                            [[ displayName(s) ]] [[ v ]] [[ displayValue(s, o) ]]
                        </span>
                    <i class="icon icon-cross clickable"
                       on-click="removefilter:[[ k ]]"></i>
                </div>
                [[ else ]]
                <div>No active filters.</div>
                [[ /each ]]
            </div>
        </div>

        <div>
            <form>
                <div class="form-group">
                    <select name="filter_subject"
                            value="[[ addFilter.field ]]"
                            class="form-control">
                        [[ #each fields ]]
                        <option value="[[ name ]]">[[ fieldLabel(.) ]]</option>
                        [[ /each ]]
                    </select>
                </div>

                <div class="form-group">
                    <select name="filter_verb"
                            value="[[ addFilter.verb ]]"
                            class="form-control">
                        [[ #each getLookups(addFilter.field) ]]
                        <option value="[[ id ]]">[[ name ]]</option>
                        [[ /each ]]
                    </select>
                </div>

                <div class="form-group">
                    [[ #getFieldType(addFilter.field) ]]
                    [[ #if type == 'select' ]]
                    <select name="filter_object"
                            value="[[ addFilter.value ]]"
                            class="form-control">
                        [[ #each options ]]
                        <option value="[[ 0 ]]">[[ 1 ]]</option>
                        [[ /each ]]
                    </select>
                    [[ elseif type == 'boolean' ]]
                    <select name="filter_object"
                            value="[[ addFilter.value ]]"
                            class="form-control">
                        <option value="True">True</option>
                        <option value="False">False</option>
                    </select>
                    [[ elseif type == 'date' ]]
                    <input name="filter_object" type="date"
                           value="[[ addFilter.value ]]"
                           class="form-control">
                    [[ else ]]
                    <input name="filter_object" type="text"
                           value="[[ addFilter.value ]]"
                           class="form-control">
                    [[ /if ]]
                    [[ /each ]]
                </div>
                <button class="btn btn-default"
                        on-click="addfilter">Add filter
                </button>

                [[ #loading ]]
                <div class="loading-spinner">
                    <i class="icon icon-circular-graph icon-2x icon-pulse"></i>
                </div>
                [[ /loading ]]
            </form>
        </div>
    </div>
    <div id="sidebar-sizer">&nbsp;</div>

</script>
