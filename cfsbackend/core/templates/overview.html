{% extends "base.html" %}

{% load staticfiles %}

{% block stylesheets %}
    <link rel="stylesheet" href="{% static 'nvd3/build/nv.d3.css' %}">
{% endblock %}

{% block content %}
    <script id="dashboard-template" type="text/html">
        <NavBar filterHash="[[ filterHash ]]"/>
        <div class="row dashboard">
            <div class="large-3 columns">
                <Filter/>
            </div>
            <div class="large-9 columns">
                <div class="row">
                    <div class="medium-12 columns">
                        <div id="volume-by-date">
                            <h3 class="chart-title">Call Volume Over Time</h3>
                            {% include "_loading.html" %}
                            <svg></svg>
                        </div>
                        <div class="chart-controls">
                            <ul class="inline-list">
                                <li><a href="" on-click="filterByDate:ytd">Year
                                    to
                                    Date</a></li>
                                <li><a href="" on-click="filterByDate:28days">Past
                                    28
                                    Days</a></li>
                                <li><a href="" on-click="filterByDate:7days">Past
                                    7
                                    Days</a></li>
                            </ul>
                        </div>
                        <div class="explanation">
                            <p>
                                This chart shows day-by-day overall call volume
                                for the
                                current selection of calls. It also shows a
                                30-day
                                running average of call volume, calculated from
                                the 15
                                days previous and 15 days after the measured
                                day.
                            </p>

                            <p>
                                "Past 28 Days" and "Past 7 Days" are based from
                                the last
                                full Sunday-Saturday period. If today is
                                Wednesday,
                                10/7, "Past 7 Days" shows calls from Sunday,
                                9/27 to
                                Saturday, 10/4.
                            </p>

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="medium-12 columns">
                        <div id="day-hour-heatmap">
                            <h3 class="chart-title">Day/Hour Heatmap</h3>
                            {% include "_loading.html" %}
                        </div>
                        <div class="explanation">
                            This heatmap shows us the average call volume for
                            each hour
                            of the day for each day of the week. The darker the
                            color,
                            the heavier the volume for that time period.
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="large-7 columns">
                        <div id="ort-by-source">
                            <h3 class="chart-title">Officer Response Time By
                                Source</h3>
                            {% include "_loading.html" %}
                            <svg></svg>
                        </div>
                        <div class="explanation">
                            This chart shows us average officer response time
                            for each
                            call source for the current call selection.
                        </div>
                        <div id="volume-by-source">
                            <h3 class="chart-title">Call Volume By Source</h3>
                            {% include "_loading.html" %}
                            <svg></svg>
                        </div>
                        <div class="explanation">
                            This chart shows us the percentage of calls
                            initiated by
                            an officer versus the percentage created by all
                            other means
                            by day over the selected time period.
                        </div>
                    </div>
                    <div class="large-5 columns">
                        <div id="volume-by-beat">
                            <h3 class="chart-title">Call Volume By Beat</h3>
                            {% include "_loading.html" %}
                            <svg></svg>
                        </div>
                        <div class="explanation">
                            This chart shows the call volume by Durham beat. You
                            can
                            click any beat here to filter the calls to only that
                            beat's
                            calls.
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="medium-12 columns">
                        <div id="volume-by-nature">
                            <h3 class="chart-title">Call Volume By Nature</h3>
                            {% include "_loading.html" %}
                            <svg></svg>
                        </div>
                        <div class="explanation">
                            <p>This chart shows the call volume by the nature of
                                the call.
                                You can click any nature here to filter the
                                calls to only
                                calls with that nature.</p>

                            <p>The chart only shows the top 30 natures by call
                                volume.
                                All other ones are grouped under "ALL
                                OTHER".</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>
{% endblock %}

<!-- Latest compiled and minified JavaScript -->
{% block javascript %}
    <script src="{% static 'underscore-contrib/underscore.object.builders.js' %}"></script>
    <script src="{% static 'underscore-contrib/underscore.object.selectors.js' %}"></script>
    <script src="{% static 'd3/d3.js' %}"></script>
    <script src="{% static 'nvd3/build/nv.d3.js' %}"></script>
    <script src="{% static 'colorbrewer/colorbrewer.js' %}"></script>
    <script src="{% static 'overview/overview.js' %}"></script>
{% endblock %}
</body>
</html>